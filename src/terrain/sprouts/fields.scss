@use '../soils' as *;

// ========================================
// SPROUTS — FIELD CONSTRUCTORS
// ========================================
// Mixins para construir campos de formulário e seus elementos.

// ----------------------------------------
// FIELD BASE (Mixin base para todos os campos)
// ----------------------------------------

@mixin sprout-field-base(
  $padding-y: 'sm',
  $padding-x: 'md',
  $font-size: 'md',
  $border-radius: 'sm',
  $border-width: '1'
) {
  // Reset de estilos padrão do navegador
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;

  // Dimensões e espaçamento
  width: 100%;
  padding: var(--padding-#{$padding-y}) var(--padding-#{$padding-x});
  font-size: var(--text-#{$font-size});
  line-height: var(--leading-normal);

  // Bordas e fundo
  border: var(--border-width-#{$border-width}) solid var(--border-default);
  border-radius: var(--border-radius-#{$border-radius});
  background-color: var(--bg-input);
  color: var(--text-primary);

  // Tipografia
  font-family: inherit;
  font-weight: var(--font-normal);

  // Estados de foco
  &:focus {
    outline: none;
    border-color: var(--border-focus);
    box-shadow: 0 0 0 3px var(--shadow-focus);
  }

  // Estados de hover
  &:hover {
    border-color: var(--border-hover);
  }

  // Placeholder
  &::placeholder {
    color: var(--text-muted);
    opacity: 1;
  }

  // Transições
  transition: border-color var(--duration-fast), box-shadow var(--duration-fast);
}

// ----------------------------------------
// FIELD VARIANTS (Pré-configurados)
// ----------------------------------------

@mixin sprout-input-text {
  @include sprout-field-base();
}

@mixin sprout-input-email {
  @include sprout-field-base();
}

@mixin sprout-input-password {
  @include sprout-field-base();
  font-family: var(--font-mono);
}

@mixin sprout-textarea {
  @include sprout-field-base();
  min-height: 120px;
  resize: vertical;
}

@mixin sprout-select {
  @include sprout-field-base();
  cursor: pointer;
}

// ----------------------------------------
// FIELD SIZE VARIANTS (Pré-configurados)
// ----------------------------------------

@mixin sprout-field-sm {
  @include sprout-field-base($padding-y: 'xs', $padding-x: 'sm', $font-size: 'sm');
}

@mixin sprout-field-lg {
  @include sprout-field-base($padding-y: 'md', $padding-x: 'lg', $font-size: 'lg');
}

// ----------------------------------------
// FIELD STATE VARIANTS (Pré-configurados)
// ----------------------------------------

@mixin sprout-field-error {
  @include sprout-field-state(error);
}

@mixin sprout-field-success {
  @include sprout-field-state(success);
}

@mixin sprout-field-disabled {
  @include sprout-field-state(disabled);
}

// ----------------------------------------
// FIELD SIZES
// ----------------------------------------

@mixin sprout-field-size($size: 'md') {
  padding: var(--padding-#{$size}) var(--padding-#{$size});
  font-size: var(--text-#{$size});
}

// ----------------------------------------
// FIELD STATES
// ----------------------------------------

@mixin sprout-field-state($status) {
  @if $status == error {
    border-color: var(--border-error);
    background-color: var(--bg-error);
    color: var(--text-error);
  } @else if $status == success {
    border-color: var(--border-success);
    background-color: var(--bg-success);
    color: var(--text-success);
  } @else if $status == disabled {
    opacity: var(--opacity-disabled);
    pointer-events: none;
  }
}

// ----------------------------------------
// LABELS & HINTS
// ----------------------------------------

@mixin sprout-field-label($size: 'md') {
  font-weight: var(--font-medium);
  color: var(--text-primary);
  font-size: var(--text-#{$size});
  margin-bottom: var(--gap-xs);
}

@mixin sprout-field-hint($muted: true) {
  font-size: var(--text-xs);
  margin-top: var(--gap-xs);

  @if $muted {
    color: var(--text-muted);
  } @else {
    color: var(--text-error);
  }
}

// ----------------------------------------
// FIELD GROUPS
// ----------------------------------------

@mixin sprout-field-group($layout: 'stack') {
  @if $layout == 'stack' {
    display: flex;
    flex-direction: column;
    gap: var(--gap-sm);
  } @else if $layout == 'inline' {
    display: flex;
    flex-direction: row;
    gap: var(--gap-sm);
    align-items: center;
  } @else if $layout == 'grid' {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--gap-md);
  }
}